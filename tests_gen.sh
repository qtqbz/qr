#!/bin/bash -e

TEST_CONFIGS=(
# MODE LEVEL VERSION LENGTH
  "0   0     01      0041"
  "0   0     02      0077"
  "0   0     03      0127"
  "0   0     04      0187"
  "0   0     05      0255"
  "0   0     06      0322"
  "0   0     07      0370"
  "0   0     08      0461"
  "0   0     09      0552"
  "0   0     10      0652"
  "0   0     11      0772"
  "0   0     12      0883"
  "0   0     13      1022"
  "0   0     14      1101"
  "0   0     15      1250"
  "0   0     16      1408"
  "0   0     17      1548"
  "0   0     18      1725"
  "0   0     19      1903"
  "0   0     20      2061"
  "0   0     21      2232"
  "0   0     22      2409"
  "0   0     23      2620"
  "0   0     24      2812"
  "0   0     25      3057"
  "0   0     26      3283"
  "0   0     27      3517"
  "0   0     28      3669"
  "0   0     29      3909"
  "0   0     30      4158"
  "0   0     31      4417"
  "0   0     32      4686"
  "0   0     33      4965"
  "0   0     34      5253"
  "0   0     35      5529"
  "0   0     36      5836"
  "0   0     37      6153"
  "0   0     38      6479"
  "0   0     39      6743"
  "0   0     40      7089"
  "0   1     01      0034"
  "0   1     02      0063"
  "0   1     03      0101"
  "0   1     04      0149"
  "0   1     05      0202"
  "0   1     06      0255"
  "0   1     07      0293"
  "0   1     08      0365"
  "0   1     09      0432"
  "0   1     10      0513"
  "0   1     11      0604"
  "0   1     12      0691"
  "0   1     13      0796"
  "0   1     14      0871"
  "0   1     15      0991"
  "0   1     16      1082"
  "0   1     17      1212"
  "0   1     18      1346"
  "0   1     19      1500"
  "0   1     20      1600"
  "0   1     21      1708"
  "0   1     22      1872"
  "0   1     23      2059"
  "0   1     24      2188"
  "0   1     25      2395"
  "0   1     26      2544"
  "0   1     27      2701"
  "0   1     28      2857"
  "0   1     29      3035"
  "0   1     30      3289"
  "0   1     31      3486"
  "0   1     32      3693"
  "0   1     33      3909"
  "0   1     34      4134"
  "0   1     35      4343"
  "0   1     36      4588"
  "0   1     37      4775"
  "0   1     38      5039"
  "0   1     39      5313"
  "0   1     40      5596"
  "0   2     01      0027"
  "0   2     02      0048"
  "0   2     03      0077"
  "0   2     04      0111"
  "0   2     05      0144"
  "0   2     06      0178"
  "0   2     07      0207"
  "0   2     08      0259"
  "0   2     09      0312"
  "0   2     10      0364"
  "0   2     11      0427"
  "0   2     12      0489"
  "0   2     13      0580"
  "0   2     14      0621"
  "0   2     15      0703"
  "0   2     16      0775"
  "0   2     17      0876"
  "0   2     18      0948"
  "0   2     19      1063"
  "0   2     20      1159"
  "0   2     21      1224"
  "0   2     22      1358"
  "0   2     23      1468"
  "0   2     24      1588"
  "0   2     25      1718"
  "0   2     26      1804"
  "0   2     27      1933"
  "0   2     28      2085"
  "0   2     29      2181"
  "0   2     30      2358"
  "0   2     31      2473"
  "0   2     32      2670"
  "0   2     33      2805"
  "0   2     34      2949"
  "0   2     35      3081"
  "0   2     36      3244"
  "0   2     37      3417"
  "0   2     38      3599"
  "0   2     39      3791"
  "0   2     40      3993"
  "0   3     01      0017"
  "0   3     02      0034"
  "0   3     03      0058"
  "0   3     04      0082"
  "0   3     05      0106"
  "0   3     06      0139"
  "0   3     07      0154"
  "0   3     08      0202"
  "0   3     09      0235"
  "0   3     10      0288"
  "0   3     11      0331"
  "0   3     12      0374"
  "0   3     13      0427"
  "0   3     14      0468"
  "0   3     15      0530"
  "0   3     16      0602"
  "0   3     17      0674"
  "0   3     18      0746"
  "0   3     19      0813"
  "0   3     20      0919"
  "0   3     21      0969"
  "0   3     22      1056"
  "0   3     23      1108"
  "0   3     24      1228"
  "0   3     25      1286"
  "0   3     26      1425"
  "0   3     27      1501"
  "0   3     28      1581"
  "0   3     29      1677"
  "0   3     30      1782"
  "0   3     31      1897"
  "0   3     32      2022"
  "0   3     33      2157"
  "0   3     34      2301"
  "0   3     35      2361"
  "0   3     36      2524"
  "0   3     37      2625"
  "0   3     38      2735"
  "0   3     39      2927"
  "0   3     40      3057"
  "1   0     01      0025"
  "1   0     02      0047"
  "1   0     03      0077"
  "1   0     04      0114"
  "1   0     05      0154"
  "1   0     06      0195"
  "1   0     07      0224"
  "1   0     08      0279"
  "1   0     09      0335"
  "1   0     10      0395"
  "1   0     11      0468"
  "1   0     12      0535"
  "1   0     13      0619"
  "1   0     14      0667"
  "1   0     15      0758"
  "1   0     16      0854"
  "1   0     17      0938"
  "1   0     18      1046"
  "1   0     19      1153"
  "1   0     20      1249"
  "1   0     21      1352"
  "1   0     22      1460"
  "1   0     23      1588"
  "1   0     24      1704"
  "1   0     25      1853"
  "1   0     26      1990"
  "1   0     27      2132"
  "1   0     28      2223"
  "1   0     29      2369"
  "1   0     30      2520"
  "1   0     31      2677"
  "1   0     32      2840"
  "1   0     33      3009"
  "1   0     34      3183"
  "1   0     35      3351"
  "1   0     36      3537"
  "1   0     37      3729"
  "1   0     38      3927"
  "1   0     39      4087"
  "1   0     40      4296"
  "1   1     01      0020"
  "1   1     02      0038"
  "1   1     03      0061"
  "1   1     04      0090"
  "1   1     05      0122"
  "1   1     06      0154"
  "1   1     07      0178"
  "1   1     08      0221"
  "1   1     09      0262"
  "1   1     10      0311"
  "1   1     11      0366"
  "1   1     12      0419"
  "1   1     13      0483"
  "1   1     14      0528"
  "1   1     15      0600"
  "1   1     16      0656"
  "1   1     17      0734"
  "1   1     18      0816"
  "1   1     19      0909"
  "1   1     20      0970"
  "1   1     21      1035"
  "1   1     22      1134"
  "1   1     23      1248"
  "1   1     24      1326"
  "1   1     25      1451"
  "1   1     26      1542"
  "1   1     27      1637"
  "1   1     28      1732"
  "1   1     29      1839"
  "1   1     30      1994"
  "1   1     31      2113"
  "1   1     32      2238"
  "1   1     33      2369"
  "1   1     34      2506"
  "1   1     35      2632"
  "1   1     36      2780"
  "1   1     37      2894"
  "1   1     38      3054"
  "1   1     39      3220"
  "1   1     40      3391"
  "1   2     01      0016"
  "1   2     02      0029"
  "1   2     03      0047"
  "1   2     04      0067"
  "1   2     05      0087"
  "1   2     06      0108"
  "1   2     07      0125"
  "1   2     08      0157"
  "1   2     09      0189"
  "1   2     10      0221"
  "1   2     11      0259"
  "1   2     12      0296"
  "1   2     13      0352"
  "1   2     14      0376"
  "1   2     15      0426"
  "1   2     16      0470"
  "1   2     17      0531"
  "1   2     18      0574"
  "1   2     19      0644"
  "1   2     20      0702"
  "1   2     21      0742"
  "1   2     22      0823"
  "1   2     23      0890"
  "1   2     24      0963"
  "1   2     25      1041"
  "1   2     26      1094"
  "1   2     27      1172"
  "1   2     28      1263"
  "1   2     29      1322"
  "1   2     30      1429"
  "1   2     31      1499"
  "1   2     32      1618"
  "1   2     33      1700"
  "1   2     34      1787"
  "1   2     35      1867"
  "1   2     36      1966"
  "1   2     37      2071"
  "1   2     38      2181"
  "1   2     39      2298"
  "1   2     40      2420"
  "1   3     01      0010"
  "1   3     02      0020"
  "1   3     03      0035"
  "1   3     04      0050"
  "1   3     05      0064"
  "1   3     06      0084"
  "1   3     07      0093"
  "1   3     08      0122"
  "1   3     09      0143"
  "1   3     10      0174"
  "1   3     11      0200"
  "1   3     12      0227"
  "1   3     13      0259"
  "1   3     14      0283"
  "1   3     15      0321"
  "1   3     16      0365"
  "1   3     17      0408"
  "1   3     18      0452"
  "1   3     19      0493"
  "1   3     20      0557"
  "1   3     21      0587"
  "1   3     22      0640"
  "1   3     23      0672"
  "1   3     24      0744"
  "1   3     25      0779"
  "1   3     26      0864"
  "1   3     27      0910"
  "1   3     28      0958"
  "1   3     29      1016"
  "1   3     30      1080"
  "1   3     31      1150"
  "1   3     32      1226"
  "1   3     33      1307"
  "1   3     34      1394"
  "1   3     35      1431"
  "1   3     36      1530"
  "1   3     37      1591"
  "1   3     38      1658"
  "1   3     39      1774"
  "1   3     40      1852"
  "2   0     01      0017"
  "2   0     02      0032"
  "2   0     03      0053"
  "2   0     04      0078"
  "2   0     05      0106"
  "2   0     06      0134"
  "2   0     07      0154"
  "2   0     08      0192"
  "2   0     09      0230"
  "2   0     10      0271"
  "2   0     11      0321"
  "2   0     12      0367"
  "2   0     13      0425"
  "2   0     14      0458"
  "2   0     15      0520"
  "2   0     16      0586"
  "2   0     17      0644"
  "2   0     18      0718"
  "2   0     19      0792"
  "2   0     20      0858"
  "2   0     21      0929"
  "2   0     22      1003"
  "2   0     23      1091"
  "2   0     24      1171"
  "2   0     25      1273"
  "2   0     26      1367"
  "2   0     27      1465"
  "2   0     28      1528"
  "2   0     29      1628"
  "2   0     30      1732"
  "2   0     31      1840"
  "2   0     32      1952"
  "2   0     33      2068"
  "2   0     34      2188"
  "2   0     35      2303"
  "2   0     36      2431"
  "2   0     37      2563"
  "2   0     38      2699"
  "2   0     39      2809"
  "2   0     40      2953"
  "2   1     01      0014"
  "2   1     02      0026"
  "2   1     03      0042"
  "2   1     04      0062"
  "2   1     05      0084"
  "2   1     06      0106"
  "2   1     07      0122"
  "2   1     08      0152"
  "2   1     09      0180"
  "2   1     10      0213"
  "2   1     11      0251"
  "2   1     12      0287"
  "2   1     13      0331"
  "2   1     14      0362"
  "2   1     15      0412"
  "2   1     16      0450"
  "2   1     17      0504"
  "2   1     18      0560"
  "2   1     19      0624"
  "2   1     20      0666"
  "2   1     21      0711"
  "2   1     22      0779"
  "2   1     23      0857"
  "2   1     24      0911"
  "2   1     25      0997"
  "2   1     26      1059"
  "2   1     27      1125"
  "2   1     28      1190"
  "2   1     29      1264"
  "2   1     30      1370"
  "2   1     31      1452"
  "2   1     32      1538"
  "2   1     33      1628"
  "2   1     34      1722"
  "2   1     35      1809"
  "2   1     36      1911"
  "2   1     37      1989"
  "2   1     38      2099"
  "2   1     39      2213"
  "2   1     40      2331"
  "2   2     01      0011"
  "2   2     02      0020"
  "2   2     03      0032"
  "2   2     04      0046"
  "2   2     05      0060"
  "2   2     06      0074"
  "2   2     07      0086"
  "2   2     08      0108"
  "2   2     09      0130"
  "2   2     10      0151"
  "2   2     11      0177"
  "2   2     12      0203"
  "2   2     13      0241"
  "2   2     14      0258"
  "2   2     15      0292"
  "2   2     16      0322"
  "2   2     17      0364"
  "2   2     18      0394"
  "2   2     19      0442"
  "2   2     20      0482"
  "2   2     21      0509"
  "2   2     22      0565"
  "2   2     23      0611"
  "2   2     24      0661"
  "2   2     25      0715"
  "2   2     26      0751"
  "2   2     27      0805"
  "2   2     28      0868"
  "2   2     29      0908"
  "2   2     30      0982"
  "2   2     31      1030"
  "2   2     32      1112"
  "2   2     33      1168"
  "2   2     34      1228"
  "2   2     35      1283"
  "2   2     36      1351"
  "2   2     37      1423"
  "2   2     38      1499"
  "2   2     39      1579"
  "2   2     40      1663"
  "2   3     01      0007"
  "2   3     02      0014"
  "2   3     03      0024"
  "2   3     04      0034"
  "2   3     05      0044"
  "2   3     06      0058"
  "2   3     07      0064"
  "2   3     08      0084"
  "2   3     09      0098"
  "2   3     10      0119"
  "2   3     11      0137"
  "2   3     12      0155"
  "2   3     13      0177"
  "2   3     14      0194"
  "2   3     15      0220"
  "2   3     16      0250"
  "2   3     17      0280"
  "2   3     18      0310"
  "2   3     19      0338"
  "2   3     20      0382"
  "2   3     21      0403"
  "2   3     22      0439"
  "2   3     23      0461"
  "2   3     24      0511"
  "2   3     25      0535"
  "2   3     26      0593"
  "2   3     27      0625"
  "2   3     28      0658"
  "2   3     29      0698"
  "2   3     30      0742"
  "2   3     31      0790"
  "2   3     32      0842"
  "2   3     33      0898"
  "2   3     34      0958"
  "2   3     35      0983"
  "2   3     36      1051"
  "2   3     37      1093"
  "2   3     38      1139"
  "2   3     39      1219"
  "2   3     40      1273"
)

MODE_ALPHABETS=(
  ["0"]='0-9'
  ["1"]='0-9A-Z$%*+./:-'
  ["2"]='a-z,_!?@#&`()[]{}\|~^:;<=>'
)

TEST_DIR="tests"
mkdir -p "${TEST_DIR}"

for TEST_CONFIG in "${TEST_CONFIGS[@]}"; do
  FIELDS=(${TEST_CONFIG})
  MODE="${FIELDS[0]}"
  LEVEL="${FIELDS[1]}"
  VERSION="${FIELDS[2]}"
  LENGTH="${FIELDS[3]}"

  ALPHABET="${MODE_ALPHABETS[${MODE}]}"
  TEST_INPUT="${TEST_DIR}/test_${MODE}_${LEVEL}_${VERSION}_${LENGTH}.in"
  tr -dc "${ALPHABET}" < /dev/urandom | head -c "${LENGTH}" > "${TEST_INPUT}"
done
